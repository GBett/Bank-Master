<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="564px" preserveAspectRatio="none" style="width:1328px;height:564px;" version="1.1" viewBox="0 0 1328 564" width="1328px" zoomAndPan="magnify"><defs><filter height="300%" id="f11r878fghgz13" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="36" lengthAdjust="spacingAndGlyphs" textLength="332" x="505" y="34.8047">Transaction service</text><!--cluster ts--><polygon fill="#FFFF00" filter="url(#f11r878fghgz13)" points="28,74.3984,790,74.3984,804,119.375,810,119.375,810,234.3984,28,234.3984,28,74.3984" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="28" x2="804" y1="119.375" y2="119.375"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="750" x="36" y="105.4688">nl.openweb.graphql-endpoint.transaction-service.clj</text><!--entity c--><rect fill="#FEFECE" filter="url(#f11r878fghgz13)" height="72.9766" style="stroke: #A80036; stroke-width: 3.0;" width="176" x="44" y="137.3984"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="34" y="147.3984"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="34" y="190.375"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="136" x="64" y="184.4688">consumer</text><!--entity tr--><path d="M529,148.3984 C529,128.3984 626,128.3984 626,128.3984 C626,128.3984 723,128.3984 723,148.3984 L723,199.375 C723,219.375 626,219.375 626,219.375 C626,219.375 529,219.375 529,199.375 L529,148.3984 " fill="#ADD8E6" filter="url(#f11r878fghgz13)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M529,148.3984 C529,168.3984 626,168.3984 626,168.3984 C626,168.3984 723,168.3984 723,148.3984 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="154" x="549" y="203.4688">transaction</text><!--entity cl--><ellipse cx="1132" cy="110.3984" fill="#FEFECE" filter="url(#f11r878fghgz13)" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M1132,126.3984 L1132,180.3984 M1106,142.3984 L1158,142.3984 M1132,180.3984 L1106,210.3984 M1132,180.3984 L1158,210.3984 " fill="none" filter="url(#f11r878fghgz13)" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="74" x="1095" y="251.4688">client</text><!--entity kc--><rect fill="#FFA500" filter="url(#f11r878fghgz13)" height="72.9766" style="stroke: #A80036; stroke-width: 3.0;" width="216" x="16" y="470.3984"/><rect fill="#FFA500" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="6" y="480.3984"/><rect fill="#FFA500" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="6" y="523.375"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="176" x="36" y="517.4688">Kafka cluster</text><!--entity sp--><rect fill="#FFFF00" filter="url(#f11r878fghgz13)" height="72.9766" style="stroke: #A80036; stroke-width: 3.0;" width="276" x="656" y="470.3984"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="646" y="480.3984"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="646" y="523.375"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="236" x="676" y="517.4688">schema-provider</text><!--link cl to sp--><path d="M1120.8462,266.9702 C1110.6676,315.2058 1091.206,371.8378 1054,410.3984 C1023.8424,441.654 982.628,462.8036 941.903,477.0878 " fill="none" id="cl-sp" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="932.1236,480.3926,951.7374,482.2085,941.5972,477.191,946.6148,467.0507,932.1236,480.3926" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1122.8804,256.8142,1111.5005,272.8921,1120.9161,266.6194,1127.1888,276.035,1122.8804,256.8142" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="170" x="1108" y="343.5352">queries using</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="196" x="1108" y="374.1563">server, can also</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="122" x="1108" y="404.7773">subscribe</text><!--link c to kc--><path d="M126.233,220.401 C123.1062,248.259 119.5682,284.2848 118,316.3984 C115.9622,358.1264 116.6964,368.641 118,410.3984 C118.6148,430.0938 119.9378,452.029 121.1852,469.9546 " fill="none" id="c-kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="127.4508,209.767,117.4543,226.7397,126.3128,219.7021,133.3504,228.5605,127.4508,209.767" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="128" x="158" y="358.5352">consumes</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="204" x="120" y="389.1563">BalanceChanged</text><!--link ts to sp--><path d="M790.538,234.9095 C790.4205,237.4276 790.3032,240.0017 790.1867,242.6275 C789.9536,247.8792 789.7236,253.338 789.5013,258.9706 C787.7223,304.0308 786.4331,360.2089 788,410.3984 C788.6148,430.0938 789.9378,452.029 791.1852,469.9546 " fill="none" id="ts-sp" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="790.538,234.9095,781.7079,252.5172,790.072,244.8987,797.6905,253.2628,790.538,234.9095" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="226" x="804" y="343.5352">executes function</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="254" x="790" y="374.1563">getting transactions</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="214" x="810" y="404.7773">or a subscription</text><!--link c to sp--><path d="M183.05,209.5652 C276.0964,275.4634 464.134,408.5292 468,410.3984 C523.7362,437.346 588.5508,458.3312 645.638,473.7144 " fill="none" id="c-sp" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="655.4648,476.3282,640.1261,463.9701,645.8008,473.7577,636.0132,479.4324,655.4648,476.3282" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="210" x="514" y="358.5352">send transaction</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="298" x="470" y="389.1563">for active subscriptions</text><!--link c to tr--><path d="M230.6656,173.3984 C317.1298,173.3984 442.1122,173.3984 528.2908,173.3984 " fill="none" id="c-tr" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="220.3174,173.3984,238.3174,181.3984,230.3174,173.3984,238.3174,165.3984,220.3174,173.3984" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="236" x="256.5" y="160.5352">insert transactions</text><!--
@startuml

title Transaction service

package "nl.openweb.graphql-endpoint.transaction-service.clj" as ts #Yellow {
    component consumer as c
    database transaction as tr #LightBlue
}
actor client as cl
[Kafka cluster] as kc #Orange

component "schema-provider" as sp #Yellow

cl <- -> sp :queries using\lserver, can also\lsubscribe
c <- - kc :consumes\nBalanceChanged
ts <- - sp :executes function\ngetting transactions\nor a subscription
c - -> sp :send transaction\nfor active subscriptions
c <- tr :insert transactions


@enduml

PlantUML version 1.2019.05(Sat Apr 20 18:45:36 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_202-release-1483-b49
Operating System: Mac OS X
OS Version: 10.14.4
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>