<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="930px" preserveAspectRatio="none" style="width:1468px;height:930px;" version="1.1" viewBox="0 0 1468 930" width="1468px" zoomAndPan="magnify"><defs><filter height="300%" id="f1c2oglk2nna68" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="36" lengthAdjust="spacingAndGlyphs" textLength="422" x="530" y="34.8047">Account creation service</text><!--cluster ts--><polygon fill="#FFFF00" filter="url(#f1c2oglk2nna68)" points="28,74.3984,856,74.3984,870,119.375,1006,119.375,1006,234.3984,28,234.3984,28,74.3984" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="28" x2="870" y1="119.375" y2="119.375"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="816" x="36" y="105.4688">nl.openweb.graphql-endpoint.money-transfer-service.clj</text><!--entity ac--><path d="M44,148.3984 C44,128.3984 118,128.3984 118,128.3984 C118,128.3984 192,128.3984 192,148.3984 L192,199.375 C192,219.375 118,219.375 118,219.375 C118,219.375 44,219.375 44,199.375 L44,148.3984 " fill="#ADD8E6" filter="url(#f1c2oglk2nna68)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M44,148.3984 C44,168.3984 118,168.3984 118,168.3984 C118,168.3984 192,168.3984 192,148.3984 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="108" x="64" y="203.4688">account</text><!--entity p--><rect fill="#FEFECE" filter="url(#f1c2oglk2nna68)" height="72.9766" style="stroke: #A80036; stroke-width: 3.0;" width="166" x="577" y="137.3984"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="567" y="147.3984"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="567" y="190.375"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="126" x="597" y="184.4688">producer</text><!--entity c--><rect fill="#FEFECE" filter="url(#f1c2oglk2nna68)" height="72.9766" style="stroke: #A80036; stroke-width: 3.0;" width="176" x="814" y="137.3984"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="804" y="147.3984"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="804" y="190.375"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="136" x="834" y="184.4688">consumer</text><!--entity kc--><rect fill="#FFA500" filter="url(#f1c2oglk2nna68)" height="72.9766" style="stroke: #A80036; stroke-width: 3.0;" width="216" x="660" y="506.3984"/><rect fill="#FFA500" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="650" y="516.3984"/><rect fill="#FFA500" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="650" y="559.375"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="176" x="680" y="553.4688">Kafka cluster</text><!--entity cl--><ellipse cx="1224" cy="762.3984" fill="#FEFECE" filter="url(#f1c2oglk2nna68)" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M1224,778.3984 L1224,832.3984 M1198,794.3984 L1250,794.3984 M1224,832.3984 L1198,862.3984 M1224,832.3984 L1250,862.3984 " fill="none" filter="url(#f1c2oglk2nna68)" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="74" x="1187" y="903.4688">client</text><!--entity sp--><rect fill="#FFFF00" filter="url(#f1c2oglk2nna68)" height="72.9766" style="stroke: #A80036; stroke-width: 3.0;" width="276" x="568" y="789.3984"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="558" y="799.3984"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="558" y="842.375"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="236" x="588" y="836.4688">schema-provider</text><!--link ac to p--><path d="M192.2264,173.3984 C289.6856,173.3984 460.8108,173.3984 566.8592,173.3984 " fill="none" id="ac-p" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="576.9142,173.3984,558.9142,165.3984,566.9142,173.3984,558.9142,181.3984,576.9142,173.3984" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="312" x="228.5" y="160.5352">make request using uuid</text><!--link c to kc--><path d="M864.3534,218.5308 C851.1758,236.2646 837.3504,257.3866 828,278.3984 C793.7938,355.2648 778.0884,453.7098 771.7352,505.9764 " fill="none" id="c-kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="870.748,210.1126,853.4896,219.6072,864.6992,218.0758,866.2306,229.2853,870.748,210.1126" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="128" x="830" y="305.5352">consumes</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="342" x="830" y="336.1563">AccountCreationConfirmed</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="46" x="830" y="366.7773">and</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="284" x="830" y="397.3984">AccountCreationFailed</text><!--link sp to cl--><path d="M854.3786,825.3984 C963.2704,825.3984 1104.2864,825.3984 1176.6156,825.3984 " fill="none" id="sp-cl" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1186.7768,825.3984,1168.7768,817.3984,1176.7768,825.3984,1168.7768,833.3984,1186.7768,825.3984" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="844.134,825.3984,862.134,833.3984,854.134,825.3984,862.134,817.3984,844.134,825.3984" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="202" x="880.5" y="752.5352">request account</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="154" x="880.5" y="783.1563">using server</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="270" x="880.5" y="813.7773">needs token and iban</text><!--link ac to sp--><path d="M136.4412,228.5756 C169.0448,319.4122 244.3382,502.1426 358,620.3984 C431.615,696.9888 539.9776,754.723 616.179,789.0954 " fill="none" id="ac-sp" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="133.0476,219.0198,131.5332,238.6593,136.3944,228.4432,146.6105,233.3043,133.0476,219.0198" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="196" x="360" y="491.5352">if the username</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="174" x="360" y="522.1563">already exists</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="264" x="360" y="552.7773">checks the password</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="202" x="360" y="583.3984">otherwise insert</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="176" x="360" y="614.0195">with new uuid</text><!--link p to kc--><path d="M576.607,188.3918 C525.398,202.3652 463.7284,228.8554 432,278.3984 C401.799,325.5566 400.8184,357.8826 432,404.3984 C445.3822,424.3616 561.9748,469.485 654.1108,502.7242 " fill="none" id="p-kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="664.0788,506.3084,649.8478,492.6893,654.6687,502.9245,644.4336,507.7454,664.0788,506.3084" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="116" x="434" y="336.5352">produces</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="312" x="434" y="367.1563">ConfirmAccountCreation</text><!--link c to sp--><path d="M990.5196,194.86 C1063.7822,214.625 1159.3778,245.7546 1182,278.3984 C1213.8974,324.4262 1205.0042,353.3414 1182,404.3984 C1100.451,585.3938 898.369,719.9478 785.4886,783.9242 " fill="none" id="c-sp" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="776.1848,789.152,795.7961,787.309,784.9028,784.2535,787.9584,773.3602,776.1848,789.152" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="250" x="1170" y="537.5352">send AccountResult</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="298" x="1146" y="568.1563">for active subscriptions</text><!--
@startuml

title Account creation service

package "nl.openweb.graphql-endpoint.money-transfer-service.clj" as ts #Yellow {
    database account as ac #LightBlue
    component producer as p
    component consumer as c
}

[Kafka cluster] as kc #Orange
actor client as cl
component "schema-provider" as sp #Yellow

ac -> p :make request using uuid
c <- - kc :consumes\lAccountCreationConfirmed\nand\nAccountCreationFailed
cl <-l-> sp :request account\lusing server\nneeds token and iban
ac <- - sp :if the username\lalready exists\nchecks the password\notherwise insert\nwith new uuid
p -> kc :produces\lConfirmAccountCreation
c - - -> sp :send AccountResult\nfor active subscriptions


@enduml

PlantUML version 1.2019.05(Sat Apr 20 18:45:36 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_202-release-1483-b49
Operating System: Mac OS X
OS Version: 10.14.4
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>